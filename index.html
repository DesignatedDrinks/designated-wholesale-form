<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Designated Drinks Wholesale Order Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
  <style>
    /* …all your existing styles… */
  </style>
</head>
<body>
  <div id="loader"></div>
  <form id="wholesaleForm">
    <header>
      <h1>Wholesale Order Form</h1>
      <div class="submit-top">
        <button type="submit">Submit Order</button>
        <span class="order-total-header">Total: $0.00</span>
      </div>
    </header>
    <main>
      <div class="buyer-info">
        <label for="name">Full Name</label>
        <input id="name" name="fullName" type="text" required>
        <label for="company">Company Name</label>
        <input id="company" name="companyName" type="text" required>
        <label for="email">Email Address</label>
        <input id="email" name="email" type="email" required>
      </div>
      <div id="productList"></div>
      <div class="form-actions">
        <button type="submit">Submit Order</button>
      </div>
    </main>
  </form>

  <script>
  (async () => {
    const sheetUrl = 'https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/export?format=csv';
    const text = await fetch(sheetUrl).then(r => r.text());
    const rows = text.split('\n').slice(1).map(r => r.split(','));
    const grouped = {};

    rows.forEach(([title, canSize, , canPrice, imageUrl, casePrice, status]) => {
      if (!title || status.trim().toLowerCase() !== 'yes') return;
      const vendor = (title.match(/^(.+?)\s\(/) || ['Other'])[1];
      const cleanTitle = title
        .replace(new RegExp('^' + vendor + '\\s*', 'i'), '')
        .replace(/\(Non-Alcoholic\)/i, '')
        .trim();
      (grouped[vendor] = grouped[vendor]||[]).push({
        title: cleanTitle,
        canSize,
        casePrice: parseFloat(casePrice),
        imageUrl
      });
    });

    const list = document.getElementById('productList');
    Object.entries(grouped).sort().forEach(([vendor, products]) => {
      const hdr = document.createElement('div');
      hdr.className = 'vendor-header';
      hdr.textContent = vendor + ' ▼';

      const cont = document.createElement('div');
      cont.className = 'vendor-products';
      hdr.onclick = () => {
        cont.style.display = cont.style.display==='flex'?'none':'flex';
      };

      products.forEach(p => {
        const row = document.createElement('div');
        row.className = 'product-row';
        // ← here’s the change: include vendor in the title
        row.dataset.itemTitle = vendor + ' – ' + p.title;

        row.innerHTML = `
          <img src="${p.imageUrl}" alt="${p.title}">
          <div class="product-details">
            <div class="product-title">${p.title}</div>
            <div class="can-size">${p.canSize}</div>
          </div>
          <div class="qty-inputs">
            <label>Cases</label>
            <div class="qty-control">
              <button type="button" class="qty-btn decrement">−</button>
              <input type="number" min="0" value="0" data-price="${p.casePrice}">
              <button type="button" class="qty-btn increment">+</button>
            </div>
          </div>
        `;
        cont.append(row);
      });

      list.append(hdr, cont);
    });

    // … rest of your JS (updateTotals, spinner logic, submit handler) remains unchanged …

  })();
  </script>
</body>
</html>
